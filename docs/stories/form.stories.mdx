import { Story, Canvas, Meta } from "@storybook/addon-docs/blocks";
import { useEffect } from "@storybook/client-api";
import { viewinfo } from "../view/form.view.js";

# 表单（Form）

---

<Meta title="复用组件/表单(Form)" />

<Canvas>
    <Story
        name="表单(Form)"
        height="150px"
        parameters={{
            docs: { source: { code: `${viewinfo.html}${viewinfo.js}` } },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.js)();
            });
            return viewinfo.html;
        }}
    </Story>
</Canvas>

## 基础属性

| 参数 | 说明          | 类型   | 可选值               | 默认值  |
| ---- | ------------- | ------ | -------------------- | ------- |
| ele  | 元素 dom 节点 | String | Class / id / TagName | TagName |

## 配置 options

| 参数        | 说明                   | 类型    | 可选值 | 默认值 |
| ----------- | ---------------------- | ------- | ------ | ------ |
| autoHidebar | 是否自动显示隐藏滚动条 | Boolean | --     | false  |
| searchMode  | 搜索下拉模式(桌面端)   | Boolean | --     | false  |

## 校验参数 verify

| 参数   | 说明         | 类型   | 可选值 | 默认值 |
| ------ | ------------ | ------ | ------ | ------ |
| verify | 校验参数对象 | Object | --     | --     |

| key            | 说明                   | value    | 说明                 |
| -------------- | ---------------------- | -------- | -------------------- |
| controls[name] | 表单内控件的 name 属性 | Function | 检验方法，具体见示例 |

## 表单控件回调 controls

| 参数     | 说明             | 类型   | 可选值 | 默认值 |
| -------- | ---------------- | ------ | ------ | ------ |
| controls | 表单内各控件回调 | Object | --     | --     |

| key            | 说明                   | value    | 说明                                   |
| -------------- | ---------------------- | -------- | -------------------------------------- |
| controls[name] | 表单内控件的 name 属性 | Function | 回调方法，具体见各个基础控件的回调示例 |

## 回调方法 on

| 参数   | 说明       | 类型     | 默认值 | 回调参数     |
| ------ | ---------- | -------- | ------ | ------------ |
| init   | 初始化回调 | Function | null   | 当前对象 DOM |
| submit | 提交后回调 | Function | null   | event↓       |

| event 参数   | 说明               | 类型    |
| ------------ | ------------------ | ------- |
| objectParams | 表单元素键值对象   | Object  |
| stringParams | 反序列化参数字符串 | String  |
| status       | 是否通过校验状态   | Boolean |

## 调用方法

| 方法名 | 说明     | 类型     | 默认值 | 参数 |
| ------ | -------- | -------- | ------ | ---- |
| val    | 外部赋值 | Function | --     | --   |
| clear  | 外部清值 | Function | --     | --   |
