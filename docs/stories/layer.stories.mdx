import { Story, Canvas, Meta } from "@storybook/addon-docs/blocks";
import { useEffect } from "@storybook/client-api";
import { viewinfo } from "../view/layer.view.js";

# 弹层（Layer）

---

<Meta title="复用组件/弹层(Layer)" />

<Canvas>
    <Story
        name="通用"
        height="150px"
        parameters={{
            docs: {
                source: { code: `${viewinfo.message}${viewinfo.messageJS}` },
            },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.messageJS)();
            });
            return viewinfo.message;
        }}
    </Story>
</Canvas>

<Canvas>
    <Story
        name="iframe嵌套"
        height="150px"
        parameters={{
            docs: { source: { code: `${viewinfo.ifm}${viewinfo.ifmJS}` } },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.ifmJS)();
            });
            return viewinfo.ifm;
        }}
    </Story>
</Canvas>

<Canvas>
    <Story
        name="可拖拽"
        height="150px"
        parameters={{
            docs: { source: { code: `${viewinfo.drag}${viewinfo.dragJS}` } },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.dragJS)();
            });
            return viewinfo.drag;
        }}
    </Story>
</Canvas>

## 基础属性

| 参数 | 说明          | 类型   | 可选值               | 默认值  |
| ---- | ------------- | ------ | -------------------- | ------- |
| ele  | 元素 dom 节点 | String | Class / id / TagName | TagName |

## 参数配置 options

| 参数         | 说明                   | 类型          | 可选值       | 默认值                 |
| ------------ | ---------------------- | ------------- | ------------ | ---------------------- |
| title        | 标题内容               | String        | --           | --                     |
| content      | 主要内容               | HTML / String | --           | --                     |
| isMask       | 是否有背景遮罩层       | Boolean       | true / false | true                   |
| isDefaultBtn | 是否有默认按钮         | Boolean       | true / false | true                   |
| defaultBtn   | 按钮描述               | Object        | --           | ok:确定 / cancel:取消  |
| isDrag       | 是否拖拽               | Boolean       | true / false | false                  |
| animation    | 补间动画               | Class         | --           | hopeui-anim-scaleSprin |
| isFullScreen | 内容区是否全屏         | Boolean       | true / false | false                  |
| offsetTop    | 弹窗上间距             | Number        | --           | 30                     |
| offsetBottom | 弹窗下间距             | Number        | --           | 30                     |
| maskClose    | 遮罩是否可以关闭弹窗   | Boolean       | true / false | false                  |
| isAutoOpen   | 是否初始化自动打开弹层 | Boolean       | true / false | true                   |
| customClass  | 自定义类名             | String        | --           | --                     |
| width        | 容器宽度               | String        | --           | 800px                  |

## 回调方法 on

| 方法名  | 说明           | 类型     | 默认值 | 回调参数     |
| ------- | -------------- | -------- | ------ | ------------ |
| init    | 初始化回调     | Function | null   | 当前对象 DOM |
| confirm | 确认完成后回调 | Function | null   | 当前对象 DOM |
| open    | 打开后回调     | Function | null   | 当前对象 DOM |
| close   | 关闭后回调     | Function | null   | 当前对象 DOM |
| update  | 弹层位置更新   | Function | null   | 当前对象 DOM |

## 调用方法

| 方法名 | 说明         | 类型     | 默认值 | 参数     |
| ------ | ------------ | -------- | ------ | -------- |
| close  | 外部调用关闭 | Function | --     | callback |
