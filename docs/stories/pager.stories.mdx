import { Story, Canvas, Meta } from "@storybook/addon-docs/blocks";
import { useEffect } from "@storybook/client-api";
import { viewinfo } from "../view/pager.view.js";

# 分页（Pager）

---

<Meta title="复用组件/分页(Pager)" />

<Canvas>
    <Story
        name="基础"
        height="150px"
        parameters={{
            docs: {
                source: { code: `${viewinfo.general}${viewinfo.generalJS}` },
            },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.generalJS)();
            });
            return viewinfo.general;
        }}
    </Story>
</Canvas>

<Canvas>
    <Story
        name="扩展"
        height="150px"
        parameters={{
            docs: {
                source: { code: `${viewinfo.extend}${viewinfo.extendJS}` },
            },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.extendJS)();
            });
            return viewinfo.extend;
        }}
    </Story>
</Canvas>

## 基础属性

| 参数 | 说明          | 类型   | 可选值               | 默认值  |
| ---- | ------------- | ------ | -------------------- | ------- |
| ele  | 元素 dom 节点 | String | Class / id / TagName | TagName |

## 配置 options

| 参数        | 说明                | 类型    | 可选值   | 默认值 |
| ----------- | ------------------- | ------- | -------- | ------ |
| omit        | 保留按钮数,必须奇数 | Number  | 1,3,5 .. | 5      |
| prevName    | 上翻页命名定义      | String  | --       | 上一页 |
| nextName    | 下翻页命名定义      | String  | --       | 下一页 |
| hideNum     | 隐藏数字按钮        | Boolean | --       | false  |
| pageMapping | 当前页字段映射      | String  | --       | pageNo |
| extend      | 完整扩展            | Boolean | --       | false  |

## http 请求参数 params

参考 jquery.ajax 参数配置列表

## 初始化函数 reader

回调值为第一次请求后的返回 json 数据，在此区域对列表进行拼接赋值追加等动态操作，必须要有 return 一个参数对象

```javascript
return {
    pageNo: res.pageNo //当前页码,
    pageSize: res.pageSize //一页显示数据量,
    totalNumber: res.totalNumber //总页数,
};
```

## 回调方法 on

| 参数     | 说明             | 类型     | 默认值 | 回调参数 |
| -------- | ---------------- | -------- | ------ | -------- |
| jumpOver | 跳转后回调       | Function | null   | event↓   |
| init     | 初始化完成后回调 | Function | null   | --       |

| event 参数 | 说明     | 类型   |
| ---------- | -------- | ------ |
| targetELe  | dom 对象 | Object |
| pageNo     | 页码     | String |
| type       | 点击类型 | String |
| event      | 事件类型 | String |

## 调用方法

| 方法名 | 说明             | 类型     | 默认值 | 参数     | 备注                                   |
| ------ | ---------------- | -------- | ------ | -------- | -------------------------------------- |
| jump   | 外部跳转方法     | Function | --     | 页码     | --                                     |
| set    | 参数设外部置方法 | Function | --     | 参数集合 | obj.set({url:'xxx',data:{keyword:22}}) |
