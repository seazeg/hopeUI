import { Story, Canvas, Meta } from "@storybook/addon-docs/blocks";
import { useEffect } from "@storybook/client-api";
import { viewinfo } from "../view/selector.view.js";

# 下拉框（Selector）

---

<Meta title="基础控件/下拉框(Selector)" />

<Canvas>
    <Story
        name="下拉框(Selector)"
        height="300px"
        parameters={{
            docs: {
                source: { code: `${viewinfo.general}${viewinfo.generalJS}` },
            },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.generalJS)();
            });
            return viewinfo.general;
        }}
    </Story>
</Canvas>

<Canvas>
    <Story
        name="分组"
        height="300px"
        parameters={{
            docs: { source: { code: `${viewinfo.group}${viewinfo.groupJS}` } },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.groupJS)();
            });
            return viewinfo.group;
        }}
    </Story>
</Canvas>

## 基础属性

| 参数 | 说明          | 类型   | 可选值               | 默认值  |
| ---- | ------------- | ------ | -------------------- | ------- |
| ele  | 元素 dom 节点 | String | Class / id / TagName | TagName |

## 配置 options

| 参数        | 说明                   | 类型    | 可选值 | 默认值 |
| ----------- | ---------------------- | ------- | ------ | ------ |
| autoHidebar | 是否自动显示隐藏滚动条 | Boolean | --     | false  |
| switchIcon  | 自定义下拉字体图标     | String  | --     | --     |
| searchMode  | 搜索下拉模式(桌面端)   | Boolean | --     | false  |

## 回调方法 on

| 参数   | 说明                    | 类型     | 默认值 | 回调参数     |
| ------ | ----------------------- | -------- | ------ | ------------ |
| init   | 初始化回调              | Function | null   | 当前对象 DOM |
| input  | searchMode 下输入后回调 | Function | null   | --|
| change | 选择完成后回调          | Function | null   | event↓       |
| toggle | 下拉切换回调            | Function | null   | --           |
| close  | 下拉框区域外关闭后回调  | Function | null   | --           |
| update | 下拉框更新              | Function | null   | --           |

| event 参数        | 说明                                 | 类型   |
| ----------------- | ------------------------------------ | ------ |
| originalParentEle | select 原始 dom 对象                 | Object |
| virtualParentEle  | select 虚拟 dom 对象                 | Object |
| targetEle         | 当前选中选项 dom                     | Object |
| label             | 选中的描述值                         | String |
| value             | 选中的实际值                         | String |
| name              | select 组名                          | String |
| group             | 选项组内标号(移动端不含有此字段)     | String |
| groupSort         | 选项组内自身编号(移动端不含有此字段) | String |
| eventName         | 当前回调事件名                       | String |

## 调用方法

| 方法名 | 说明     | 类型     | 默认值 | 参数 |
| ------ | -------- | -------- | ------ | ---- |
| val    | 外部赋值 | Function | --     | --   |
| clear  | 外部清值 | Function | --     | --   |
