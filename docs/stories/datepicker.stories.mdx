import { Story, Canvas, Meta } from "@storybook/addon-docs/blocks";
import { useEffect } from "@storybook/client-api";
import { viewinfo } from "../view/datepicker.view.js";

# 日期时间选择（Datepicker）

---

<Meta title="复用组件/日期时间选择(Datepicker)" />

<Canvas>
    <Story
        name="日期时间选择(Datepicker)"
        height="150px"
        parameters={{
            docs: { source: { code: `${viewinfo.html}${viewinfo.js}` } },
        }}
    >
        {() => {
            useEffect(() => {
                Function(viewinfo.js)();
            });
            return viewinfo.html;
        }}
    </Story>
</Canvas>

## 基础属性

| 参数 | 说明          | 类型   | 可选值               | 默认值  |
| ---- | ------------- | ------ | -------------------- | ------- |
| ele  | 元素 dom 节点 | String | Class / id / TagName | TagName |

## 配置 options

| 参数             | 说明                  | 类型    | 可选值        | 默认值              |
| ---------------- | --------------------- | ------- | ------------- | ------------------- |
| confirmBtn       | Pc 端是否显示确认按钮 | Boolean | --            | false               |
| format           | 日期格式              | String  | --            | yyyy-MM-dd HH:mm:ss |
| type             | 日期模式/日期时间模式 | String  | date/datetime | datetime            |
| offTop           | 相对于 input 偏移高度 | Number  | --            | --                  |
| startDate        | 允许的开始日期        | String  | --            | 1900-1-1            |
| endDate          | 允许的结束日期        | String  | --            | 2050-1-1            |
| mobileStart      | 移动端最小日期        | String  | --            | 1920                |
| mobileEnd        | 移动端最大日期        | String  | --            | 2070                |
| mobileSelectDate | 移动端选中日期        | Array   | --            | [2020,1,1]          |
| mobileTitle      | 移动端标题            | String  | --            | 日期选择            |

## 回调方法 on

| 参数   | 说明                    | 类型     | 默认值 | 回调参数     |
| ------ | ----------------------- | -------- | ------ | ------------ |
| init   | 初始化回调              | Function | null   | 当前对象 DOM |
| change | 状态改变后回调(移动/PC) | Function | null   | event↓       |
| clear  | 清空后回调              | Function | null   | event↓       |
| open   | 选择框打开后回调        | Function | null   | event↓       |
| close  | 选择框关闭后回调        | Function | null   | event↓       |

| event 参数 | 说明           | 类型   |
| ---------- | -------------- | ------ |
| ele        | 原始 dom 对象  | Object |
| eventName  | 当前回调事件名 | String |

## 调用方法

| 方法名 | 说明     | 类型     | 默认值 | 参数 |
| ------ | -------- | -------- | ------ | ---- |
| set    | 外部赋值 | Function | --     | [2011,1,1,1]   |
| clear  | 外部清值 | Function | --     | --   |
