import { Story, Canvas, Meta } from "@storybook/addon-docs/blocks";
import { useEffect } from "@storybook/client-api";
import { viewinfo } from "../view/danmu.view.js";

# 弹幕（Danmu）

---

<Meta title="复用组件/弹幕(Danmu)" />

<Canvas>
    <Story
        name="弹幕(Danmu)"
        height="300px"
        parameters={{
            docs: { source: { code: `${viewinfo.html}\n\n<script type="text/javascript">\n${viewinfo.js}\n</script>` } },
        }}
    >
        {() => {
            useEffect(() => {
                setTimeout(() => {
                    Function(viewinfo.js)();
                }, 100);
            });
            return viewinfo.html;
        }}
    </Story>
</Canvas>

## 基础属性

| 参数 | 说明          | 类型   | 可选值               | 默认值  |
| ---- | ------------- | ------ | -------------------- | ------- |
| ele  | 元素 dom 节点 | String | Class / id / TagName | TagName |

## 配置 options

| 参数      | 说明         | 类型    | 可选值 | 默认值      |
| --------- | ------------ | ------- | ------ | ----------- |
| channel   | 通道数       | Number  | --     | 3           |
| bgColor   | 背景色组     | Array   | --     | ["#111111"] |
| speed     | 动画速度     | Number  | --     | 7           |
| spacing   | 间距         | Float   | --     | 1.2         |
| opacity   | 背景透明度   | Number  | --     | 0.4         |
| isMask    | 左右过渡遮罩 | Boolean | --     | --          | false |
| data      | 数据源       | Array   | --     | ---         |
| maskColor | 遮罩层颜色   | String  | --     | #ffffff     |


## 调用方法

| 方法名 | 说明         | 类型     | 默认值 | 参数     |
| ------ | ------------ | -------- | ------ | -------- |
| open   | 外部调用打开 | Function | --     | callback |
| close  | 外部调用关闭 | Function | --     | callback |
| show  | 外部调用显示 | Function | --     | callback |
| hide  | 外部调用隐藏 | Function | --     | callback |